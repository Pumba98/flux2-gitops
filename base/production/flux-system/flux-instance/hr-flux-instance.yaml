---
apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: flux
  namespace: flux-system
spec:
  interval: 5m
  chart:
    spec:
      chart: flux-instance
      version: 0.38.1
      sourceRef:
        kind: HelmRepository
        name: fluxcd-charts
        namespace: flux-system
  dependsOn:
    - name: flux-operator
      namespace: flux-system
  values:
    instance:
      sync:
        kind: GitRepository
        url: ssh://git@github.com/Pumba98/flux2-gitops
        path: base/production
        ref: refs/heads/talos
        provider: generic
        pullSecret: flux-system
